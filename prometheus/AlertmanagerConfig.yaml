apiVersion: v1
kind: ConfigMap
metadata:
  name: prometheus-alertmanager
  namespace: mark  # 確保替換為您的命名空間
data:
  alertmanager.yml: |
    route:
      group_by: ['alertname']  # 根據 alertname 分組
      group_wait: 30s          # 在發送通知前等待時間
      group_interval: 5m       # 相同警報組的通知間隔
      repeat_interval: 1h      # 重複警報的間隔
      receiver: 'slack'       # 默認的接收者

    receivers:
      - name: 'slack'
        slack_configs:
          - api_url: 'https://hooks.slack.com/services/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'  # 替換為您的 Slack Webhook URL
            channel: '#test'  # 發送通知的 Slack 頻道
            send_resolved: true   # 是否在警報恢復時發送通知
          
    # 自定義的警報路由和接收器可以在此添加
